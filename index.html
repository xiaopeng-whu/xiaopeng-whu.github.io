<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="王小鹏&#39;s Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="王小鹏&#39;s Blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="王小鹏&#39;s Blog">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>王小鹏's Blog</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	
	<a href="https://github.com/xiaopeng-whu"><img style="position: absolute; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_darkblue_121621.png" alt="Fork me on GitHub"></a>
	
    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">王小鹏's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/14/测试/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/14/测试/" itemprop="url">Test</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-14T23:08:59+08:00">
                2020-01-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  7 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>重拾博客的测试。</p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/14/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/01/14/hello-world/" itemprop="url">Hello World</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2020-01-14T14:28:29+08:00">
                2020-01-14
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  73 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/08/一次疑似主机被DNS污染的记录/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/08/一次疑似主机被DNS污染的记录/" itemprop="url">一次疑似主机被DNS污染的记录</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-08T15:38:02+08:00">
                2019-03-08
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/埋坑处/" itemprop="url" rel="index">
                    <span itemprop="name">埋坑处</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  382 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  1 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>前几天打开电脑查资料，突然发现百度打不开了，但其他一些网页都可以运行，十分奇怪。</p>
<p><img src="/2019/03/08/一次疑似主机被DNS污染的记录/DNS污染.png" alt="DNS污染"></p>
<p>查了DNS也没发现什么问题，舍友也出现了类似的问题，当时认为是校园网又崩了，就没再深究。</p>
<p>过了一天又遇到了同样的问题，而看群里也没有什么特别的反应，看来不是校园网的问题了。</p>
<p>找了下解决方法，一种方法是把 <a href="https://www.baidu.com" target="_blank" rel="noopener">https://www.baidu.com</a> 中的https改成http，但我改完之后并没有什么反应依旧无法使用..</p>
<p>第二种方法是把www改成ipv6，即登录ipv6.baidu.com，果然成功访问。但每次从百度的搜索结果打开新的页面时候，貌似会自动改成www前缀，进而又打不开（所以是不是和www有关?）每次想浏览一个页面都要把前缀改掉十分不方便…</p>
<p>最后万能的舍友告诉我这可能和最近使用频繁的虚拟机有关，把任务管理器中的VMware Hostd服务关闭就恢复正常了。尝试后发现可行，但还不明白这个服务为什么会导致打不开网页，之前使用时候并没有发生过类似的问题。而且如果使用虚拟机，还要手动打开这个服务，还是没能根治这个问题。</p>
<p><img src="/2019/03/08/一次疑似主机被DNS污染的记录/VMwareHostd.png" alt="VMwareHostd"></p>
<p>百度不到相关问题，这里只能先埋个坑，等找到原因再填。</p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/05/kali使用metasploit监控Android手机和windows电脑/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/" itemprop="url">kali使用metasploit监控Android手机和windows电脑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-05T17:45:58+08:00">
                2019-03-05
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/渗透测试/" itemprop="url" rel="index">
                    <span itemprop="name">渗透测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>信安系统导论布置的第一次小组作业，是在kali虚拟机上实现一种攻击方式，之前甚至没听说过kali的我，一开始是一脸懵逼的…后来装了kali知道这种linux系统自带了许多渗透攻击类的工具，是很好的进行内网渗透测试的一个操作系统环境。随之在网上搜索简单易学的攻击方式…</p>
<p>最后在b站看到了一个使用metasploit进行android手机监控的操作视频，看起来操作并不复杂，最终实现的效果也十分吸引人————偷拍、暗中录音等，于是小组（我单方面）初步定下了这个主题。</p>
<p>然而当我按步骤一步不落地操作完毕后，执行exploit我并没有得到手机的权限，尝试多次无果只得百度，得知这种渗透方法要求环境是客户机与宿主机在一个网段，即内网环境。虽然我的主机和手机都连着校园网，但因为我的kali使用NAT模式进行联网，得到的ip地址是虚拟机随机分配的，导致kali的ip与手机ip并不能在一个网段，也就无法实现监听。</p>
<p>既然知道了问题出在哪，那应该很容易解决了吧。（然而可达鸭眉头一皱，发现事情并没有那么简单.jpg）百度后得知使用桥接模式可使主机与虚拟机共享ip即可实现处于同一网段，但当我又是按照网上教程一步不落地操作完毕，包括手动改了虚拟机内的ip、掩码、网关、DNS等设置，却出现了让人崩溃的事情——无法联网！在此之后又是无数次重复操作的过程，在确认操作确实没有问题后，我自闭了…（后来知道了是校园网的问题..主机连校园网虚拟机就无法使用桥接模式联网..<a href="https://blog.csdn.net/u013121305/article/details/49669811）" target="_blank" rel="noopener">https://blog.csdn.net/u013121305/article/details/49669811）</a></p>
<p>后来换个角度，找了下如何内网转外网渗透，一个教程提供了一个内网转发的工具（网站）–ngrok cc，貌似是把ip映射成另一个ip，具体原理不太懂..依旧是按照教程全部做完，最后的确有了反应，但在上传完毕后几秒后就连接失败了，始终无法得到权限，再次懵逼…目前还不懂错在哪里，可能是这个方法不适用吧，等之后理解了原理再回头看，先搁置着…</p>
<p>最后没有办法了，选择再装一个安卓虚拟机，这样两个机器都采用NAT模式得到同一ip段的ip，也不需要和主机一致。再一步步重复开始的操作，总算成功了…但由于是虚拟机，所以很多功能并无法实现…比如隐秘拍照会得到一张彩色二维码式的图片…短信电话什么的都不能获取，只能查一下系统版本来证明真的是成功获取权限了…</p>
<p><img src="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/手机监控示例.jpg" alt="手机监控示例"></p>
<p>下面把步骤记录一下（这里以入侵windows来作示例，入侵android同理，只需把windows改成android就ok了）：</p>
<h2 id="0x00-生成木马"><a href="#0x00-生成木马" class="headerlink" title="0x00 生成木马"></a>0x00 生成木马</h2><p><img src="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/step1.png" alt="step1"></p>
<h2 id="0x01-将木马传到宿主机上"><a href="#0x01-将木马传到宿主机上" class="headerlink" title="0x01 将木马传到宿主机上"></a>0x01 将木马传到宿主机上</h2><p>这里因为是作实验，选择直接上传到网盘再下载，也没有作任何隐蔽或反查杀处置，以后学到其他知识再进行优化。</p>
<h2 id="0x02-进入msf配置参数"><a href="#0x02-进入msf配置参数" class="headerlink" title="0x02 进入msf配置参数"></a>0x02 进入msf配置参数</h2><p><img src="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/step2.png" alt="step2"></p>
<h2 id="0x03-开启监听"><a href="#0x03-开启监听" class="headerlink" title="0x03 开启监听"></a>0x03 开启监听</h2><p>等到端口号和ip地址都设置好后，执行exploit等待对方开启木马即可。</p>
<p><img src="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/电脑监控示例.jpg" alt="电脑监控示例"></p>
<h2 id="0x04"><a href="#0x04" class="headerlink" title="0x04"></a>0x04</h2><p>使用screenshot等命令进行测试，得到图片说明成功获取权限。</p>
<p><img src="/2019/03/05/kali使用metasploit监控Android手机和windows电脑/截取当前屏幕.png" alt="截取当前屏幕"></p>
<p>当然还有很多其他命令可供尝试，这里就不再赘述了。</p>
<hr>
<p>整个流程看下来其实并没有什么操作难度，最珍贵的是在从零学习一项技术时遇到各种问题不断解决不断尝试转换思路的过程，最终试验成功也是很让人欣喜。将来要继续努力学习更多技术，从中体验乐趣！</p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/ubuntu18-04内核添加系统调用/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/03/ubuntu18-04内核添加系统调用/" itemprop="url">ubuntu18.04内核添加系统调用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-03T18:47:20+08:00">
                2019-03-03
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/操作系统/" itemprop="url" rel="index">
                    <span itemprop="name">操作系统</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.3k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  4 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>操作系统布置了第一次大作业，让我们给linux内核加一个系统调用，并创建程序验证，还要用ptrace等工具进行监测。监测部分暂时还没有思路，先把前部分操作记录一下。</p>
<p>书上的教程已经太老了，基本没什么参考价值，只是能大概帮助理解一下系统调用的大致流程及原理。在老师没有讲过以及课本没有什么参考资料的时候，百度大概是最好的选择了，好在网上有很多这类的教程。</p>
<hr>
<p>#尝试version1</p>
<p>一开始想着既然是在linux添加修改内核，不如直接在之前为了信安课而装的kali上进行，网上相关教程也不少，但不得不说，在系统调用方面，kali就是个弟弟…各种缺配置缺文件，甚至版本不同路径都可能不一样。你不知道你缺什么配置工具，只能做一步停一步慢慢开展，而大部分配置甚至不能直接用<code>sudo apt-get install</code>来进行安装，会提示各种错误，比如找不到所需安装包，这时又要去百度才知道还要更改source.list的源；在比如两个文件有依赖关系，就要先安一个提示的版本再重新安装…总之会遇到各种各样的问题，花了一上午加下午经历了无数大大小小错误甚至升级了VMware版本，最后好不容易能进行<code>sudo make -j4</code>编译操作了，结果运行了十分钟又报错，很奇怪的错。<br><img src="/2019/03/03/ubuntu18-04内核添加系统调用/kali编译错误.jpg" alt="kali编译错误"><br>网上甚至很少解决方法（我就找到一种明确的，还对我的系统不适用…)当时直接心态崩了..直接选择换linux系统用ubuntu来做。</p>
<hr>
<p>#尝试version2</p>
<p>换ubuntu安装时甚至也出现了错误，最后的安装过程时间很长，我就先去买饭，回来就发现电脑蓝屏了..(此处心疼电脑1s…)开机又配置了下语言、VMware Tools工具等东西。</p>
<p>换了系统后再按照网上的ubuntu18.04系统调用教程一步一步做，基本没有出错，深觉一个好系统的重要性..</p>
<p>步骤记录在这里吧。</p>
<p>##1.准备操作（提前安装好后续可能用到的软件和工具）</p>
<pre><code>sudo apt-get update  //更新系统源码 
sudo apt-get install vim //安装vim
sudo apt-get install libncurses5-dev libssl-dev  //下载依赖包
sudo apt-get install build-essential openssl  
sudo apt-get install zlibc minizip  
sudo apt-get install libidn11-dev libidn11
sudo apt-get install flex bison //没有这个依赖包可能会在make menuconfig配置界面报错。
***依赖包缺少系统一般会有提示，装好了错误也就解决了。
</code></pre><p>##2.内核的解压和添加自己的系统调用</p>
<p>###解压</p>
<p>先将在官网下好的内核直接拉到ubuntu里，然后将压缩包用指令移到/usr/src目录下面（过程需要root权限）。</p>
<p>###添加系统调用</p>
<p>（最好先将目录切换到解压后的内核里操作）</p>
<pre><code>sudo vim kernel/sys.c //添加自己的函数
</code></pre><p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/函数.png" alt="函数"></p>
<pre><code>sudo vim arch/x86/include/asm/syscalls.h //声明
</code></pre><p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/头文件声明.png" alt="头文件声明"></p>
<pre><code>sudo vim arch/x86/entry/syscalls/syscall_64.tbl  //添加调用号
</code></pre><p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/调用号.png" alt="调用号"></p>
<p>这里注意声明函数以及调用名称要一致，否则后面编译会出错。</p>
<p>##3.删除一些无用的文件</p>
<pre><code>sudo make mrproper //会删除所有的编译生成文件、内核配置文件（.config文件）和各种备份文件，几乎只在第一次执行内核编译前采用这条命令

sudo make clean //这命令则是用于删除大多数的编译生成文件，但会保留内核的配置文件.config，还有足够的编译支持扩展模块。所以若只想删除前一次编译过程的残留数据，只需执行make clean命令。

//前一条命令删除的范围更大，事实上，make mrproper在具体执行时第一步就是调用make clean

sudo make menuconfig //产生图形化界面，save后exit就行了
</code></pre><p>##4.编译新内核并安装</p>
<p>###编译<br>    sudo make -j4 //后面的-j4是采用四核来加速编译速度，若不使用则会很慢，取决于虚拟机处理器的内核总数的设置<br>经过漫长的等待..我是直接开了机器直接睡觉睡醒就好了..</p>
<p>###安装<br>    sudo make modules_install<br>    sudo make install<br><img src="/2019/03/03/ubuntu18-04内核添加系统调用/内核安装配置完成.jpg" alt="内核安装配置完成"></p>
<p>##5.重启</p>
<p>一开始我并不知道怎么选择新的内核，后来才知道ubuntu重启自动默认选择新内核，貌似要选择其他的要开机一直按ESC，反正不需要了先记录下。</p>
<p>利用<code>uname -a</code>可知前后版本不同，内核已经改变。</p>
<p>##6.测试</p>
<p>编写c文件编译进行测试，以及查看日志文件看结果。</p>
<p>依次执行</p>
<pre><code>touch hello.c
gcc -o hello hello.c
./hello
</code></pre><p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/创建程序.png" alt="创建程序"></p>
<p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/编译成功.jpg" alt="编译成功"></p>
<p><img src="/2019/03/03/ubuntu18-04内核添加系统调用/日志查看.png" alt="日志查看"></p>
<p>其中注意创建c函数时候要将输出作为long类型输出，因为系统调用默认要求使用long类型（？）。</p>
<hr>
<p>添加系统调用的大致过程就是这样了，留几个参考链接便于查阅。</p>
<p><a href="https://blog.csdn.net/qq_38898129/article/details/80398851" target="_blank" rel="noopener">https://blog.csdn.net/qq_38898129/article/details/80398851</a></p>
<p><a href="https://blog.csdn.net/qq_36290650/article/details/83184088" target="_blank" rel="noopener">https://blog.csdn.net/qq_36290650/article/details/83184088</a></p>
<p><a href="https://blog.csdn.net/weixin_42349518/article/details/80517197" target="_blank" rel="noopener">https://blog.csdn.net/weixin_42349518/article/details/80517197</a></p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/01/hardworking⇏success/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/01/hardworking⇏success/" itemprop="url">hardworking⇏success</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-01T18:21:15+08:00">
                2019-03-01
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/闲谈/" itemprop="url" rel="index">
                    <span itemprop="name">闲谈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="0x00"><a href="#0x00" class="headerlink" title="0x00"></a>0x00</h1><p>一周过后尝试无果，想写技术博客也写不了，写点最近的一些感触吧。</p>
<p>新学期课程增多，实验部分也明显增加，许多东西都要自己课下自学再在自己机器上做实验，虽然难度不小，但比以往的电路实验那种需要手工操作的要有趣得多，自己也愿意在这上面投入时间而不是被动完成作业的形式。</p>
<p>但毕竟自己太菜，掌握知识太少，理论还能突击学习，一到实践就各种错误。信安系统导论课布置的要求实现一种渗透方式，我选择了使用metasploit进行android手机的渗透。在网上看视频操作挺简单的，一自己实践就各种问题。</p>
<p>先是因为我的linux是使用虚拟机NAT模式进行配置联网的，导致主机和虚拟机的ip地址不在一个网段，进而最后生成的木马无法对同连校园网的手机进行监听，因为这种渗透方式需要监听机与被监听机ip在一个网段，这是第一个大问题。</p>
<p>后来找到另一种方法，使用ngrok进行内网转发，就是将虚拟机的ip映射为外网ip（大概是这样吧我也不太懂），但照着教程一步不落地做完，到最后一步还是接收不到shell权限，session总是opend后很快就closed，百度了半天也没找到解决方法，后来加了数字签名也没用，猜测是转发方式不对或者木马进程被android系统关闭，但尝试多次还是解决不了，只能换思路。</p>
<p>之后就考虑改变虚拟机联网方式为桥接模式，但配置了很长时间尝试了很多次，改了设置最后就不能连不上外网了，目前猜测的可能原因是：kali系统不同导致一些文件路径不同，或是虚拟机本身存在问题，或是自己操作上的问题..（linux很多命令不熟悉…)</p>
<p>差不多一周过去了还是没能成功实现一次，现在考虑换个主题了…难受…</p>
<h1 id="0x01"><a href="#0x01" class="headerlink" title="0x01"></a>0x01</h1><p>前几天考研结果出来了，本来没有我这个大二生什么事的，但之前关注的几个b站学习up主也都发了动态。其中有一个up主我认为是肯定能考上的，结果成绩不理想，复查也没有发现问题，太可惜了。这个up主在上学期的时候，基本上只要我起床她都已经开始学习了，每天学习十个小时以上，甚至有过十六个小时，如此努力的人却没有实现自己的目标，实在让我对“努力学习”的“努力”产生了怀疑。</p>
<p>曾经我一直以为只要想考研且有决心每天认真学习，考过是很顺理成章的一件事，现在看来并不是这样了。一直以来我一直不注重平常的基础学习，对未来还没有明确的规划，想着车到山前必有路，就算大三放弃其他念头专心备考也应该没什么困难，现在再看这想法实在是太天真了…脚踏实地，以及听天由命吧。</p>
<h1 id="0x02"><a href="#0x02" class="headerlink" title="0x02"></a>0x02</h1><p>刚刚在微博看到一句话很能描述我现在的状态，“大多数程序员都高估了他们一天能完成的开发量，却低估了他们一年能学习到的东西”。</p>
<p>一周没能完成一项任务，总以为很简单的事情一晚上就能解决，实际上是高估了自己。而自己又没有一个长远的目标可供追求，总认为那些“遥不可及”的目标真的实现不了，可能也是低估了一个想上进的心吧。但这又和上面的事情有些矛盾，也或许不矛盾，无所谓了，都是些奇奇怪怪的想法。</p>
<h1 id="0x03"><a href="#0x03" class="headerlink" title="0x03"></a>0x03</h1><p>以前考试周也不常出宿舍学习的舍友这学期都开始认真学习了，反而我却迟迟进不了状态…明天（或者说是今天，刚过了12点..）图书馆希望能约束下自己吧。</p>
<p>想法到此为止，安安稳稳睡一觉，美好的事物都在明天等着我。</p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/24/win10使用虚拟机运行QQT/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/24/win10使用虚拟机运行QQT/" itemprop="url">win10使用虚拟机运行QQT</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-24T09:59:25+08:00">
                2019-02-24
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/虚拟机/" itemprop="url" rel="index">
                    <span itemprop="name">虚拟机</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  697 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>自从大学换了笔记本使用win10系统后，从小学玩到现在的游戏QQ堂就无法打开了，这大概都归功于腾讯和天美了，几年不曾更新游戏，游戏内最新的公告还是15年的，外挂猖獗炸房横生，刷分挂机随处不在，游戏环境也不断恶化，对新手玩家也越来越不友好（这游戏怕已经不会有新玩家了..）emmm尽管这游戏在逐步走向gg，但毕竟还是我玩的第一款网游且一直热爱未曾放弃的游戏，直到遇到了win10的制裁..</p>
<p>因为许久不更新，游戏对win10系统十分不友好，有一段时间还可以通过qq游戏大厅打开的形式进入游戏，但在win10系统自动更新的“人性化”功能下，也越来越难兼容了，终于在其他方法都不好使的情况下，只能放弃win10玩游戏的想法，转用使用虚拟机在xp系统中运行了。</p>
<p>但在我去年暑假满怀期待地安装好虚拟机以及xp系统后，打开游戏却还是出现了问题..</p>
<p><img src="/2019/02/24/win10使用虚拟机运行QQT/error.jpeg" alt="error"></p>
<p>我佛了这游戏外挂都检测不出来却能检测出虚拟机环境…当时内心是崩溃的，于是考虑是否要装双系统…</p>
<p>之后问题搁置了一段时间，直到前几天因课程需要又使用到虚拟机时又想到这个问题，折腾了一会解决了问题。</p>
<p>首先我在想是否是腾讯安全平台的问题，就是那个打开腾讯游戏在右下角弹出加载的那个TP标志，于是我在游戏目录里找到了这个东西，并直接删除了。的确打开游戏右下角不显示了，但在登录时候还是会被检测，看来不是这个原因了。</p>
<p>于是直接百度，虽然不能直接搜到对于QQT运行环境的解决方法，但还是能找到类似游戏的相关问题。</p>
<p>最后找到了一个关于网游多开的解决方法，就是在虚拟机安装目录中的系统文件使用记事本打开后加入几行代码，就可以躲避游戏的多开检测。于是我猜测这种方法也可以躲避运行环境检测，随之如法炮制，果然成功十分舒适。</p>
<p><img src="/2019/02/24/win10使用虚拟机运行QQT/success.png" alt="success"></p>
<p>还是熟悉的界面，充斥着卖挂房间和骂人大厅，但十分亲切！随之退出打开王者去峡谷厮杀…(逃…</p>
<p>最后把防检测代码记录在这里吧，来源百度。</p>
<pre><code>monitor_control.virtual_rdtsc = &quot;false&quot;
monitor_control.restrict_backdoor = &quot;true&quot;
monitor_control.disable_directexec = &quot;true&quot;
</code></pre>
          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/20/单道批处理、多道批处理和分时操作系统/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/20/单道批处理、多道批处理和分时操作系统/" itemprop="url">单道批处理、多道批处理和分时操作系统</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-02-20T10:08:13+08:00">
                2019-02-20
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/操作系统/" itemprop="url" rel="index">
                    <span itemprop="name">操作系统</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.9k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  6 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<p>首先要弄清批处理系统和分时系统的区别。</p>
<h1 id="批处理系统"><a href="#批处理系统" class="headerlink" title="批处理系统"></a>批处理系统</h1><p>严格的定义，就是指用户将一批作业提交给操作系统后就不再干预，由操作系统控制它们自动运行。这种采用批量处理作业技术的操作系统称为批处理操作系统。</p>
<p>简单来说就是我手中有一大堆作业（相当于一个程序）要运行，如果我一个一个作业放进内存中执行效率就会很慢，因为我要人为的去装载程序（早期机器会把程序写到磁带中，然后人为地放到专门处理程序的机器中），所以我一次性放一批的作业，交给操作系统运行而我不干涉，这样便节省了很多人力，如下图。</p>
<p><img src="/2019/02/20/单道批处理、多道批处理和分时操作系统/批处理系统.png" alt="批处理系统"></p>
<p>而早期的批处理又分为联机批处理和脱机批处理。</p>
<h3 id="联机批处理"><a href="#联机批处理" class="headerlink" title="联机批处理"></a>联机批处理</h3><p>联机批处理系统即作业的I/O由CPU来处理。主机与输入级之间增加一个存储设备——磁带，依次把磁带上的用户作业读入主机内存并执行并把计算结果向输出机输出。完成了上一批作业后，监督程序又从输入机上输入另一批作业，保存在磁带上，并按上述步骤重复处理。</p>
<p>监督程序不停地处理各个作业，从而实现了作业到作业的自动转接，减少了作业建立时间和手工操作时间，有效克服了人机矛盾，提高了计算机的利用率。</p>
<p>但是，在作业输入和结果输出时，主机的高速CPU仍处于空闲状态，等待慢速的输入/输出设备完成工作： 主机处于“忙等”状态。</p>
<p><img src="/2019/02/20/单道批处理、多道批处理和分时操作系统/联机批处理系统.jpg" alt="联机批处理系统"></p>
<h3 id="脱机批处理"><a href="#脱机批处理" class="headerlink" title="脱机批处理"></a>脱机批处理</h3><p>为提高CPU的利用率，克服缓解高速主机与慢速外设的矛盾，引入了脱机批处理系统，即I/0脱离主机控制。</p>
<p>增加一台不与主机直接相连而专门用于与I/O设备打交道的微型机（外围机）。</p>
<p>其功能是：<br>（1）从输入机上读取用户作业并放到输入磁带上。<br>（2）从输出磁带上读取执行结果并传给输出机。</p>
<p>这样，主机不是直接与慢速的输入/输出设备打交道，而是与速度相对较快的磁带机发生关系，有效缓解了主机与设备的矛盾。主机与卫星机可并行工作，二者分工明确，可以充分发挥主机的高速计算能力。</p>
<p>不足：每次主机内存中仅存放一道作业，每当它运行期间发出输入/输出（I/O）请求后，高速的CPU便处于等待低速的I/O完成状态，致使CPU空闲。</p>
<p><img src="/2019/02/20/单道批处理、多道批处理和分时操作系统/脱机批处理系统.jpg" alt="脱机批处理系统"></p>
<h1 id="分时系统"><a href="#分时系统" class="headerlink" title="分时系统"></a>分时系统</h1><p>分时操作系统：“分时”的含义是指多个用户使用同一台计算机，多个程序分时（分时间片）共享硬件和软件资源。分时操作系统是指在一台主机上连接多个带有显示器和键盘的终端，同时允许多个用户通过主机的终端，以交互方式使用计算机，共享主机中的资源。，分时操作系统将CPU的时间划分成若干个片段，称为时间片，操作系统以时间片为单位，轮流为每个终端用户服务，如下图。</p>
<p><img src="/2019/02/20/单道批处理、多道批处理和分时操作系统/分时系统.png" alt="分时系统"></p>
<p>从这二者我们可以得到：批处理系统没有人机交互，而分时系统允许多个用户同时使用；批处理系统中允许程序长时间占用CPU，而分时系统不允许。</p>
<p>下面再对比一下单道批处理、多道批处理和分时操作系统。</p>
<h1 id="单道批处理系统"><a href="#单道批处理系统" class="headerlink" title="单道批处理系统"></a>单道批处理系统</h1><p>为了实现对作业的连续处理，需要先把一批作业以脱机方式输入到磁盘上，并在系统中配上监督程序（Monitor），在它的控制下，使得这批作业能一个接着一个的连续工作。</p>
<p>具体的工作过程是首先由监督程序将磁带上的第一个作业装入内存，并把运行控制权交给作业；该作业处理完时，又把控制权交给监督程序，再有监督程序把磁带的第二个作业调入内存等等。可以看成是串行的。</p>
<p>优点：解决人机矛盾和CPU与IO设备速度不匹配问题，提高系统资源的利用率和系统吞吐量。</p>
<p>缺点：不能充分的利用系统资源，现很少使用。</p>
<h1 id="多道批处理系统"><a href="#多道批处理系统" class="headerlink" title="多道批处理系统"></a>多道批处理系统</h1><p>多道程序系统是在计算机内存中同时存放几道相互独立的程序，使它们在管理程序控制之下，相互穿插的运行。 两个或两个以上程序在计算机系统中同处于开始和结束之间的状态。这就称为多道程序技术运行的特征：多道、宏观上并行、微观上串行。</p>
<p>多道程序设计指的是允许多个程序同时进入一个计算机系统的主存储器并启动进行计算的方法。也就是说，计算机内存中可以同时存放多道（两个以上相互独立的）程序，它们都处于开始和结束之间。从宏观上看是并行的，多道程序都处于运行中，并且都没有运行结束；从微观上看是串行的，各道程序轮流使用CPU，交替执行。引入多道程序设计技术的根本目的是为了提高CPU的利用率，充分发挥计算机系统部件的并行性，现代计算机系统都采用了多道程序设计技术。</p>
<p>优势：资源利用率高，使CPU始终处于忙碌的状态，提高内存的利用率，提高IO利用率；系统吞吐量大（CPU和其资源始终保持忙碌的状态，仅在作业完成时或者运行不下去的时候才切换，系统开销小）。</p>
<p>缺点：平均周转时间长，无交互能力。</p>
<h1 id="分时操作系统"><a href="#分时操作系统" class="headerlink" title="分时操作系统"></a>分时操作系统</h1><p>分时操作系统是使一台计算机同时为几个、几十个甚至几百个用户服务的一种操作系统。把计算机与许多终端用户连接起来，分时操作系统将系统处理机时间与内存空间按一定的时间间隔，轮流地切换给各终端用户的程序使用。由于时间间隔很短，每个用户的感觉就像他独占计算机一样。分时操作系统的特点是可有效增加资源的使用率。例如UNIX系统就采用剥夺式动态优先的CPU调度，有力地支持分时操作。</p>
<p>分时操作系统是给不同用户提供程序的使用，而多道程序系统则是不同程序间的穿插运行。</p>
<p>总之，分时操作系统主要是针对于多用户来说的，而多道程序系统主要是针对于多程序来说的，注意用户和程序之间的区别。</p>
<p>参考链接：<br><a href="https://blog.csdn.net/dan15188387481/article/details/49427579?utm_source=blogxgwz1" target="_blank" rel="noopener">https://blog.csdn.net/dan15188387481/article/details/49427579?utm_source=blogxgwz1</a></p>
<p><a href="https://blog.csdn.net/qq_30137611/article/details/68065609" target="_blank" rel="noopener">https://blog.csdn.net/qq_30137611/article/details/68065609</a></p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/25/单链表/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/25/单链表/" itemprop="url">单链表</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-25T09:32:53+08:00">
                2019-01-25
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/数据结构与算法分析（C语言描述）/" itemprop="url" rel="index">
                    <span itemprop="name">数据结构与算法分析（C语言描述）</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  534 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  2 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="单链表常用函数"><a href="#单链表常用函数" class="headerlink" title="单链表常用函数"></a>单链表常用函数</h1><pre><code>//单链表函数
struct node
{
    ElementType Element;
    LinkNode* next;
 } LinkNode;
typedef LinkNode* Position; 

//测试一个链表是否为空表
int IsEmpty(List L)
{
    return L-&gt;next==NULL;
 } 

//测试当前位置是否是链表的末尾的函数
int IsLast(Position P,List L)
{
    return P-&gt;next==NULL;
 } 

//查找一个数的位置
Position Find(Element X,List L)
{
    Position p;
    p=L-&gt;next;
    while(p!==NULL&amp;&amp;p-&gt;Element!=X)
        p=p-&gt;next;

    return p;
 } 

//查找一个数的前驱节点的位置
Position FindPrevious(Element X,List L)
{
    Position p;
    p=L;
    while(p-&gt;next!=NULL&amp;&amp;p-&gt;next-&gt;Element!=X)
        p=p-&gt;next;

    return p;
}

//删除表中某个元素
void Delete(Element X,List L)
{
    Position p;
    p=Find(X,L);
    if(!p)
    {
        Position q=p-&gt;next;
        s=FindPrevious(X,L);
        s-&gt;next=q;
        free(p);
    }
 } 

//链表的插入(将新元素插入到P位置处之后） 
void Insert(Element X,List L,Position P)
{
    Position TmpCell;
    TmpCell=malloc(sizeof(LinkNode));

    TmpCell-&gt;Element=X;
    TmpCell-&gt;next=P-&gt;next;
    p-&gt;next=TmpCell;
 }

//删除表
void DeleteList(List L)
{
    Position p,q;
    p=L-&gt;next;
    L-&gt;next=NULL; //头结点指向空
    while(p!=NULL)
    {
        q=p-&gt;next;
        free(p);
        p=q;
     } 
 } 
</code></pre><hr>
<h1 id="常见的错误"><a href="#常见的错误" class="headerlink" title="常见的错误"></a>常见的错误</h1><ul>
<li>“memory access violation”或”segmentation violation”这种错误信息通常意味着有指针变量包含了伪地址。通常的原因是初始化变量失败，比如若P未定义，则其不可能指向内存的有效部分；如果P是NULL，则指向是非法的。</li>
<li>何时使用或何时不使用malloc来获取一个新的单元。我们必须记住，声明指向一个结构的指针并不创建该结构，而只是给出足够的空间容纳结构可能会使用的地址。创建尚未被声明过的记录的唯一方法是使用malloc库函数。malloc(HowManyBytes)奇迹般地使系统创建一个新的机构并返回指向该结构的指针。另一方面，如果使用一个指针变量沿着一个表行进，那就没有必要创建新的结构，此时不宜使用malloc命令。</li>
<li>malloc(sizeof(PtrToNode))是合法的，但它并不给结构体分配足够的空间，只给指针分配一个空间。</li>
</ul>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/01/23/建站之源/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zepeng Wang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar1.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="王小鹏's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/01/23/建站之源/" itemprop="url">建站之源</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-01-23T11:26:16+08:00">
                2019-01-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing">
                  <a href="/categories/闲谈/" itemprop="url" rel="index">
                    <span itemprop="name">闲谈</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  1.1k 字
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  3 分钟
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
	
	
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <hr>
<h1 id="Why"><a href="#Why" class="headerlink" title="Why"></a>Why</h1><p>对博客的最初印象是在小学时候，杨红樱（或者是别人的，记不太清了..）的某本故事书里，主人公在网上自己建了一个新浪（maybe）博客，好像叫做“胖青蛙的池塘”，他在上面写了不少文章，还得到了其他人的关注，当时看到这个地方我就萌生起了要有一个自己博客的想法。</p>
<p>当时我就在新浪申请了一个博客，我记得博客名叫“快乐王子的宫殿”类似的名字（时间久远以及找不到了..）..兴致勃勃地写过不少文字，还偶然得知班上另一个同学也在写博客玩，于是那几天我们经常互相访问互相留言，明明是同学却乐于在网上互相留下痕迹，刷访问量刷评论数，现在想想好好笑。</p>
<p>对新事物的兴趣总是没过几天就消失了，很快我就抛弃了博客..</p>
<p>后来我也在QQ空间里写过几篇日记，当然，也没有坚持多久..很快QQ空间就成为类似微博的一种社交工具了..</p>
<p>再之后，有时候总会产生想写点东西记录下来的念头，高中时候选择了写日记，各种小事各种情绪都写进日记本里，但等到了大学，提笔的机会越来越少（越来越懒），于是日记本也慢慢被我荒废。</p>
<p>大一下学期的时候，我仍是抱着尝试新鲜事物的心态，申请了一个个人微信公众号，开始真正写一些经过自己思考有一些个人思想的文章。大多是针对社会上发生的一些热点事件，或是自己最近的一些经历的特殊感受，但很少有（似乎根本没写过）技术类的文章。而且随着热情的逐渐消散，我也逐渐从日更转为周更（这一阶段转换速度很快..），又从周更转为月更，最后变成现在的随缘更..</p>
<p>那为什么又会想到建一个自己的博客呢？一次机缘巧合的机会，在我在网上搜索查找有关数据结构大作业的相关资料时候，我在github上发现了班上一个大佬的博客，那美观大气逼格高的界面深深吸引了我这个渣渣，看到大佬写过的文章不乏技术类、生活类、情感类（划去）等各类文章，当时我就下定决心也要建一个自己的博客。</p>
<hr>
<h1 id="How"><a href="#How" class="headerlink" title="How"></a>How</h1><p>于是我在知乎搜索了“如何建立个人博客”等相关的问题，找到了相关资料，一步一步按步骤，遇到error就百度，踩了n个坑，中途页面崩了一次重新配置，耗费了几天的下午晚上的空闲时间，直到刚刚才算初步配置优化完毕，变成了现在这个样子..</p>
<p>具体步骤也就不在这里详述了，就丢几个有用的网站以供有兴趣的人参考吧。</p>
<ul>
<li><p><a href="https://zhuanlan.zhihu.com/p/26625249" target="_blank" rel="noopener">Github+Hexo 搭建个人网站详细教程</a></p>
</li>
<li><p><a href="https://segmentfault.com/a/1190000004947261" target="_blank" rel="noopener">手把手教你使用Hexo + Github Pages搭建个人独立博客</a></p>
</li>
<li><p><a href="https://www.simon96.online/2018/10/12/hexo-tutorial/" target="_blank" rel="noopener">【持续更新】最全Hexo博客搭建+主题优化+插件配置+常用操作+错误分析</a></p>
</li>
<li><p><a href="https://www.jianshu.com/p/f054333ac9e6" target="_blank" rel="noopener">hexo的next主题个性化教程:打造炫酷网站</a></p>
</li>
</ul>
<p>还有配置过程中遇到了许多问题，参考了不少前辈的经验帖，就不一一列举了，总之一句话来说，遇到绝大多数问题，百度就完事了。</p>
<hr>
<h1 id="What"><a href="#What" class="headerlink" title="What"></a>What</h1><p>至于这个博客将要作何用，我觉得这次建站是我大学以来第一次真正被技术所吸引而受兴趣所驱使自发学习并取得成功的一次经历，这个过程已经弥足珍贵。当然，这个博客未来也将成为我学习新知识、记录生活、抒发感想的一个新渠道，我希望我能保持这份热情坚持下去，想规划自己未来一样构建好自己的博客。</p>
<p>努力向众多的前辈和大佬看齐。</p>
<p>与君共勉。</p>

          
        
      
    </div>
    
    
    

    

	<div>

	</div>
	
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar1.jpg" alt="Zepeng Wang">
            
              <p class="site-author-name" itemprop="name">Zepeng Wang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=450795499&auto=1&height=66"></iframe> 
		  
          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/xiaopeng-whu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://weibo.com/u/5535611908" target="_blank" title="Weibo">
                      
                        <i class="fa fa-fw fa-globe"></i>Weibo</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zepeng Wang</span>

  
</div>


  <div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv"></span>
</span>
</div>

  <!-- div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>


-->


        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"log":false,"tagMode":false});</script></body>
</html>
